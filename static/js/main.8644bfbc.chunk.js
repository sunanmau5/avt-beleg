(this["webpackJsonpavt-beleg"]=this["webpackJsonpavt-beleg"]||[]).push([[0],{38:function(e,t,n){},40:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var s=n(0),i=n.n(s),o=n(27),a=n.n(o),c=n(61),r=n(31),u=(n(38),n(32)),d=n(11),l=n(5),g=n(23),p=n.n(g),m="beach",h="birds",b="fire",f="rain",j="wind",v=[{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]}],y=[{accepts:[b,h,m,f,j],soundItems:[{icon:"/avt-beleg/svg/fire.svg",file:["sound/fire/fire_A.ogg","sound/fire/fire_B.ogg","sound/fire/fire_C.ogg","sound/fire/fire_D.ogg"],type:b,volume:4,complexity:1}]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[{icon:"/avt-beleg/svg/bird.svg",file:["sound/birds/birds_A.ogg","sound/birds/birds_B.ogg","sound/birds/birds_C.ogg","sound/birds/birds_D.ogg"],type:h,volume:3,complexity:2}]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[{icon:"/avt-beleg/svg/beach.svg",file:["sound/beach/beach_A.ogg","sound/beach/beach_B.ogg","sound/beach/beach_C.ogg","sound/beach/beach_D.ogg"],type:m,volume:2,complexity:3}]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]}],O=[{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[{icon:"/avt-beleg/svg/rain.svg",file:["sound/rain/rain_A.ogg","sound/rain/rain_B.ogg","sound/rain/rain_C.ogg","sound/rain/rain_D.ogg"],type:f,volume:4,complexity:4}]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[{icon:"/avt-beleg/svg/rain.svg",file:["sound/rain/rain_A.ogg","sound/rain/rain_B.ogg","sound/rain/rain_C.ogg","sound/rain/rain_D.ogg"],type:f,volume:3,complexity:3}]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[{icon:"/avt-beleg/svg/rain.svg",file:["sound/rain/rain_A.ogg","sound/rain/rain_B.ogg","sound/rain/rain_C.ogg","sound/rain/rain_D.ogg"],type:f,volume:2,complexity:2}]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[{icon:"/avt-beleg/svg/rain.svg",file:["sound/rain/rain_A.ogg","sound/rain/rain_B.ogg","sound/rain/rain_C.ogg","sound/rain/rain_D.ogg"],type:f,volume:1,complexity:1}]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]},{accepts:[b,h,m,f,j],soundItems:[]}],I=(n(40),n(1)),x=function(e){var t=e.color,n=e.bgColor,s=e.onClick,i=e.children,o={color:t||"white",backgroundColor:n||"#DC2626",transition:"background-color 0.2s ease-out"};return Object(I.jsx)("div",{className:"button",style:o,onClick:s,children:i})},C=n(63),_=n(28),k=n.n(_),D=n(6),N=n(62),w=(n(49),Object(s.memo)((function(e){var t=e.icon,n=e.type,s=e.file,i=e.style,o=Object(N.a)((function(){return{type:n,item:{icon:t,type:n,file:s},collect:function(e){return{isDragging:e.isDragging()}}}}),[t,n]),a=Object(l.a)(o,2),c=a[0].isDragging,r=a[1];return Object(I.jsx)("div",{className:"sound-item",ref:r,style:Object(D.a)(Object(D.a)({},i),{},{opacity:c?.4:1}),children:Object(I.jsx)("img",{src:t,alt:"icon",width:"40",height:"40"})})}))),A=(n(50),Object(s.memo)((function(e){var t=e.accept,n=e.soundItems,i=e.onDrop,o=e.isPlaying,a=e.onDoubleClick,c=e.setDragging,r=Object(C.a)({accept:t,drop:i,collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),u=Object(l.a)(r,2),d=u[0],g=d.isOver,p=d.canDrop,m=u[1],h=Object(s.useCallback)((function(e){return e.map((function(e,t){var n=e.file,s=e.volume,i=e.complexity;return Object(I.jsx)(k.a,{src:n[i-1],playing:o,loop:!0,volume:s},t)}))}),[o]),b="#1F2937";return g&&p?b="#059669":p&&(b="#4B5563"),Object(s.useEffect)((function(){c(!!p)}),[p,c]),Object(I.jsxs)("div",{className:"cell",ref:m,style:{backgroundColor:b},onDoubleClick:a,children:[n.length>0&&n.map((function(e,t){var n=e.icon,s=e.type,i=e.file;return Object(I.jsx)(w,{icon:n,type:s,file:i,style:{width:"2.5rem",height:"2.5rem"}},t)})),n.length>0&&h(n)]})}))),S=(n(51),n(16)),B=n(17),P=n(8),T=n(20),G=n(18),M=(n(52),function(e){var t=e.changeGain,n=e.step,s=void 0===n?.01:n,i=e.max,o=e.gain;return Object(I.jsx)("div",{className:"noise-volume",children:Object(I.jsx)("input",{onChange:t,step:s,max:i,type:"range",id:"noise-vol",value:o})})}),R=n(30),F=(n(53),function(e){Object(T.a)(n,e);var t=Object(G.a)(n);function n(e){var s;return Object(S.a)(this,n),(s=t.call(this,e)).canvas=i.a.createRef(),s}return Object(B.a)(n,[{key:"draw",value:function(){var e=this.props.audioData,t=this.canvas.current,n=t.height,s=t.width,i=t.getContext("2d"),o=0,a=1*s/e.length;i.lineWidth=2,i.strokeStyle=this.props.color,i.clearRect(0,0,s,n),i.beginPath(),i.moveTo(0,n/2);var c,r=Object(R.a)(e);try{for(r.s();!(c=r.n()).done;){var u=c.value/255*n;i.lineTo(o,u),o+=a}}catch(d){r.e(d)}finally{r.f()}i.lineTo(o,n/2),i.stroke()}},{key:"componentDidUpdate",value:function(){this.draw()}},{key:"render",value:function(){return Object(I.jsx)("div",{className:"canvas",children:Object(I.jsx)("canvas",{width:"300",height:"100",ref:this.canvas})})}}]),n}(s.Component)),E=(n(54),function(e){Object(T.a)(n,e);var t=Object(G.a)(n);function n(e){var s;return Object(S.a)(this,n),(s=t.call(this,e)).state={gain:0,isOn:!1,audioData:new Uint8Array(0)},s.tick=s.tick.bind(Object(P.a)(s)),s.handleClick=s.handleClick.bind(Object(P.a)(s)),s.changeGain=s.changeGain.bind(Object(P.a)(s)),s}return Object(B.a)(n,[{key:"createNoise",value:function(){var e=this.props.audioCtx.destination;this.gain=this.props.audioCtx.createGain();var t=this.props.audioCtx.createBuffer(1,1*this.props.audioCtx.sampleRate,this.props.audioCtx.sampleRate),n=t.getChannelData(0);if("white"===this.props.type)for(var s=0;s<t.length;s++)n[s]=2*Math.random()-1;else if("brown"===this.props.type)for(var i=0,o=0;o<t.length;o++){var a=2*Math.random()-1;n[o]=(i+.02*a)/1.02,i=n[o]}else if("pink"===this.props.type){var c,r,u,d,l,g,p;c=r=u=d=l=g=p=0;for(var m=0;m<t.length;m++){var h=2*Math.random()-1;c=.99886*c+.0555179*h,r=.99332*r+.0750759*h,u=.969*u+.153852*h,d=.8665*d+.3104856*h,l=.55*l+.5329522*h,g=-.7616*g-.016898*h,n[m]=c+r+u+d+l+g+p+.5362*h,p=.115926*h}}this.noiseSrc=this.props.audioCtx.createBufferSource(),this.noiseSrc.buffer=t,this.noiseSrc.loop=!0,this.gain.gain.setValueAtTime(this.props.valueAtTime,0),this.noiseSrc.connect(this.gain),this.gain.connect(this.analyser),this.analyser.connect(e),this.rafId=requestAnimationFrame(this.tick)}},{key:"componentDidMount",value:function(){this.analyser=this.props.audioCtx.createAnalyser(),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.createNoise()}},{key:"tick",value:function(){this.analyser.getByteTimeDomainData(this.dataArray),this.setState(Object(D.a)(Object(D.a)({},this.state),{},{audioData:this.dataArray})),this.rafId=requestAnimationFrame(this.tick)}},{key:"handleClick",value:function(){this.state.isOn?(this.setState({isOn:!1}),console.log("Deleted Noise Class"),this.noiseSrc.stop()):(this.setState({isOn:!0}),console.log("Created Noise Class"),this.createNoise(),this.noiseSrc.start())}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.rafId),this.analyser.disconnect(),this.gain.disconnect(),this.noiseSrc.disconnect()}},{key:"changeGain",value:function(e){var t=e.target.value;this.gain.gain.value=t,this.setState(Object(D.a)(Object(D.a)({},this.state),{},{gain:t}))}},{key:"render",value:function(){return Object(I.jsxs)("div",{className:"noise",children:[Object(I.jsx)("div",{className:"visualiser",children:Object(I.jsx)(F,{audioData:this.state.audioData,color:this.props.color})}),Object(I.jsxs)("div",{className:"control",children:[Object(I.jsx)(M,{changeGain:this.changeGain,max:this.props.max,gain:this.state.gain}),Object(I.jsx)(x,{bgColor:this.props.color,onClick:this.handleClick,children:this.props.name})]})]})}}]),n}(s.Component)),U=new AudioContext,W=Object(s.memo)((function(){var e=Object(s.useState)([y,O]),t=Object(l.a)(e,2),n=t[0],i=t[1],o=Object(s.useState)(v),a=Object(l.a)(o,2),c=a[0],r=a[1],g=Object(s.useState)(!1),C=Object(l.a)(g,2),_=C[0],k=C[1],D=Object(s.useState)(!1),N=Object(l.a)(D,2),S=N[0],B=N[1],P=Object(s.useState)([{icon:"/avt-beleg/svg/beach.svg",type:m,file:["sound/beach/beach_A.ogg","sound/beach/beach_B.ogg","sound/beach/beach_C.ogg","sound/beach/beach_D.ogg"]},{icon:"/avt-beleg/svg/bird.svg",type:h,file:["sound/birds/birds_A.ogg","sound/birds/birds_B.ogg","sound/birds/birds_C.ogg","sound/birds/birds_D.ogg"]},{icon:"/avt-beleg/svg/fire.svg",type:b,file:["sound/fire/fire_A.ogg","sound/fire/fire_B.ogg","sound/fire/fire_C.ogg","sound/fire/fire_D.ogg"]},{icon:"/avt-beleg/svg/rain.svg",type:f,file:["sound/rain/rain_A.ogg","sound/rain/rain_B.ogg","sound/rain/rain_C.ogg","sound/rain/rain_D.ogg"]},{icon:"/avt-beleg/svg/wind.svg",type:j,file:["sound/wind/wind_A.ogg","sound/wind/wind_B.ogg","sound/wind/wind_C.ogg","sound/wind/wind_D.ogg"]}]),T=Object(l.a)(P,1)[0],G=Object(s.useCallback)((function(e,t){if([0,4,8,12].some((function(t){return t===e}))){if(c[0].soundItems.length>0&&c[0].soundItems[0].type===t)return!1;if(c[4].soundItems.length>0&&c[4].soundItems[0].type===t)return!1;if(c[8].soundItems.length>0&&c[8].soundItems[0].type===t)return!1;if(c[12].soundItems.length>0&&c[12].soundItems[0].type===t)return!1}if([1,5,9,13].some((function(t){return t===e}))){if(c[1].soundItems.length>0&&c[1].soundItems[0].type===t)return!1;if(c[5].soundItems.length>0&&c[5].soundItems[0].type===t)return!1;if(c[9].soundItems.length>0&&c[9].soundItems[0].type===t)return!1;if(c[13].soundItems.length>0&&c[13].soundItems[0].type===t)return!1}if([2,6,10,14].some((function(t){return t===e}))){if(c[2].soundItems.length>0&&c[2].soundItems[0].type===t)return!1;if(c[6].soundItems.length>0&&c[6].soundItems[0].type===t)return!1;if(c[10].soundItems.length>0&&c[10].soundItems[0].type===t)return!1;if(c[14].soundItems.length>0&&c[14].soundItems[0].type===t)return!1}if([3,7,11,15].some((function(t){return t===e}))){if(c[3].soundItems.length>0&&c[3].soundItems[0].type===t)return!1;if(c[7].soundItems.length>0&&c[7].soundItems[0].type===t)return!1;if(c[11].soundItems.length>0&&c[11].soundItems[0].type===t)return!1;if(c[15].soundItems.length>0&&c[15].soundItems[0].type===t)return!1}return!0}),[c]),M=Object(s.useCallback)((function(e,t){var n=t.icon,s=t.type,i=t.file,o=e%4+1,a=Math.abs(Math.floor(e/4)-4),u={icon:n,type:s,file:i,volume:a,complexity:o},l=G(e,s);c[e].soundItems.length>=2?console.log("".concat(s," can't be dropped in cell ").concat(e)):l?(r(p()(c,Object(d.a)({},e,{soundItems:{$push:[u]}}))),console.log("".concat(s," dropped on volume ").concat(a," and complexity ").concat(o))):console.log("".concat(s," already exists in complexity ").concat(o))}),[c,G]);return Object(I.jsxs)("div",{className:"container",children:[Object(I.jsxs)("div",{className:"noise-wrapper",children:[Object(I.jsx)(E,{audioCtx:U,name:"White Noise",type:"white",color:"#949494",max:"0.2",valueAtTime:.05}),Object(I.jsx)(E,{audioCtx:U,name:"Brown Noise",type:"brown",color:"#92400E",max:"5",valueAtTime:1.2}),Object(I.jsx)(E,{audioCtx:U,name:"Pink Noise",type:"pink",color:"#F472B6",max:"0.1",valueAtTime:.02})]}),Object(I.jsxs)("div",{className:"grid-wrapper",children:[Object(I.jsx)("h1",{className:"title",children:"White Noise+"}),Object(I.jsxs)("div",{className:"grid",children:[S&&Object(I.jsxs)("span",{className:"label-wrapper",children:[Object(I.jsx)("span",{className:"label top",children:"Loud"}),Object(I.jsx)("span",{className:"label bottom",children:"Soft"}),Object(I.jsx)("span",{className:"label left",children:"Simple"}),Object(I.jsx)("span",{className:"label right",children:"Complex"})]}),c.map((function(e,t){var n=e.accepts,s=e.soundItems;return Object(I.jsx)(A,{cellIndex:t,accept:n,soundItems:s,onDrop:function(e){return M(t,e)},isPlaying:_,onDoubleClick:function(){return function(e){r(p()(c,Object(d.a)({},e,{soundItems:{$set:[]}})))}(t)},setDragging:B},t)}))]}),Object(I.jsx)("div",{className:"sound-items",children:T.map((function(e,t){var n=e.icon,s=e.type,i=e.file;return Object(I.jsx)(w,{icon:n,type:s,file:i},t)}))}),Object(I.jsxs)("div",{className:"buttons",children:[Object(I.jsx)(x,{bgColor:_?void 0:"#059669",onClick:function(){return k(!_)},children:_?"Pause":"Play"}),Object(I.jsx)(x,{onClick:function(){return r(v)},children:"Reset"})]})]}),Object(I.jsxs)("div",{className:"preset-container",children:[Object(I.jsx)(x,{bgColor:"#059669",onClick:function(){return i([].concat(Object(u.a)(n),[c]))},children:"Save Preset"}),Object(I.jsx)(x,{onClick:function(){return i([y,O])},children:"Reset Presets"})]}),Object(I.jsx)("div",{className:"preset-container",children:n.map((function(e,t){return Object(I.jsxs)(x,{bgColor:"#2563EB",onClick:function(){return r(e)},children:["Preset ",t+1]},t)}))})]})}));var q=function(){return Object(I.jsx)(c.a,{backend:r.a,children:Object(I.jsx)("div",{className:"app",children:Object(I.jsx)(W,{})})})};n(55);a.a.render(Object(I.jsx)(i.a.StrictMode,{children:Object(I.jsx)(q,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.8644bfbc.chunk.js.map